#!/bin/sh

# config
PEDE_DIRECTORY=$HOME/code/pede # pede and power.icon should both live here.
WALLPAPER=$HOME/Pictures/wallpaper.png
export GTK_THEME=Cloak-3.22

# not config
export GTK2_RC_FILES=/usr/share/themes/$GTK_THEME/gtk-2.0/gtkrc
export XAUTHORITY=$HOME/.Xauthority

# make sure new processes start somewhere sensible
pushd $HOME

# configure X itself
/usr/bin/hsetroot -center $WALLPAPER &
/usr/bin/xsetroot -cursor_name arrow &
/usr/bin/xset -dpms s off &

# start some daemons
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
/usr/bin/start-pulseaudio-x11 &
/usr/bin/ibus-daemon --xim &
/usr/bin/xscreensaver &
/usr/bin/xcompmgr &
/usr/bin/numlockx &
/usr/bin/xbanish &

# start pede
rm $PEDE_DIRECTORY/stopping
touch $PEDE_DIRECTORY/starting
$PEDE_DIRECTORY/pede 2>&1 > $PEDE_DIRECTORY/pede.log
rm $PEDE_DIRECTORY/starting
touch $PEDE_DIRECTORY/stopping

# put you back where you started, just in case
popd
